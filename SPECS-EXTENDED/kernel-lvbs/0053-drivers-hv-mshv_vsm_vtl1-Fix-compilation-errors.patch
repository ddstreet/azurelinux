From 7581c928adaa04eef87e3ce33583b82482e7fd14 Mon Sep 17 00:00:00 2001
From: Stanislav Kinsburskii <skinsburskii@microsoft.com>
Date: Tue, 30 Jul 2024 22:59:53 +0000
Subject: [PATCH 53/68] drivers: hv: mshv_vsm_vtl1: Fix compilation errors

Switch statement (a label) can't be followed by declarations before C99.

Signed-off-by: Stanislav Kinsburskii <skinsburskii@microsoft.com>
---
 drivers/hv/mshv_vsm_vtl1.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/drivers/hv/mshv_vsm_vtl1.c b/drivers/hv/mshv_vsm_vtl1.c
index f99f40f3ab13..c963c283c149 100644
--- a/drivers/hv/mshv_vsm_vtl1.c
+++ b/drivers/hv/mshv_vsm_vtl1.c
@@ -1799,15 +1799,14 @@ static void mshv_vsm_handle_entry(struct hv_vtlcall_param *_vtl_params)
 static int mshv_vsm_vtl_task(void *unused)
 {
 	struct hv_vp_assist_page *hvp;
+	struct hv_vsm_per_cpu *per_cpu;
+	struct hv_vtl_cpu_context *cpu_context;
+	struct hv_vtlcall_param *vtl_params;
 
 	while (true) {
 		hvp = hv_vp_assist_page[smp_processor_id()];
 		switch (hvp->vtl_entry_reason) {
 		case VTL_ENTRY_REASON_LOWER_VTL_CALL:
-			struct hv_vsm_per_cpu *per_cpu;
-			struct hv_vtl_cpu_context *cpu_context;
-			struct hv_vtlcall_param *vtl_params;
-
 			/*
 			 *  VTL0 can pass four arguments to VTL1 in registers rdi,
 			 *  rsi, rdx and r8 respectively. r8 is also used to pass
-- 
2.43.0

